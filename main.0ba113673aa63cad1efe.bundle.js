(()=>{"use strict";class t{constructor(){this.listHitbox=[]}addHitBox(t){this.listHitbox.push(t)}update(t){}render(t){}check(){for(let t=0;t<this.listHitbox.length;t++)for(let e=t+1;e<this.listHitbox.length;e++)if(this.listHitbox[t].intersects(this.listHitbox[e]))return!0;return!1}}class e{constructor(){this.path_name="assets/images/",this.texture_path=this.path_name,this.map_texture=new Map}static getInstance(){return e.instance||(e.instance=new e),e.instance}addTexture(t){if(this.map_texture.has(t))return;const e=new Image;e.src=this.texture_path+t+".png",this.map_texture.set(t,e)}getTexture(t){let e=this.map_texture.get(t);return e||(e=new Image,e.src=this.texture_path+t+".png",this.map_texture.set(t,e),e)}}class i{constructor(){}}class s extends i{constructor(t,e,i){super(),this.pos=t,this.width=e,this.height=i,this.active=!0}setPosition(t){this.pos=t}Init(){}update(t){}getPosX(){return this.pos.x}render(t,e,i){}getPosY(){return this.pos.y}setDeActive(){this.active=!1}getWidth(){return this.width}getHeight(){return this.height}intersects(t){return!(this.pos.x+this.width<t.getPosX()||this.pos.x>t.getPosX()+t.getWidth()||this.pos.y+this.height<t.getPosY()||this.pos.y>t.getPosY()+t.getHeight())}}class n{constructor(t,e){this._listComponent=[],this._position=t,this._size=e,this._active=!0,this.HitBox=new s(t,e.width,e.height),this.AddComponent(this.HitBox)}AddImage(t){this.image=t}SetCollision(){this.HitBox.setDeActive()}AddComponent(t){if(this._listComponent.find((e=>e.constructor.name===t.constructor.name)))throw new Error("co roi");this._listComponent.push(t)}setPosition(t){this._position=t}Update(t){if(this._active){this.setPosition({x:this.hitbox.getPosX(),y:this.hitbox.getPosY()});for(const e of this._listComponent)e.update&&e.update(t)}}Render(t){this.image&&t.render(this.image,this.hitbox.getPosX(),this.hitbox.getPosY());for(const e of this._listComponent)e.render&&e.render(t,this.HitBox.getPosX(),this.HitBox.getPosY())}getComponent(t){for(const e of this._listComponent)if(e.constructor.name===t)return e;return null}get position(){return this._position}get hitbox(){return this.HitBox}get size(){return this._size}get active(){return this._active}set active(t){this._active=t}}var o;!function(t){t[t.DashboardScene=0]="DashboardScene",t[t.PlayScene=1]="PlayScene",t[t.SettingScene=2]="SettingScene",t[t.HighScoreScene=3]="HighScoreScene",t[t.EndScene=4]="EndScene"}(o||(o={}));class r{constructor(){}pause(){}Init(){}update(t){}exit(){}resume(){}render(t){}}class h{constructor(){this.currentScene=null,this.sceneMap=new Map}static getInstance(){return h.instance||(h.instance=new h),h.instance}AddScene(t,e){this.sceneMap.set(t,e)}getScene(t){return this.sceneMap.get(t)}changeScene(t){var e;null==this.currentScene||null===(e=this.currentScene)||void 0===e||e.exit(),this.currentScene=t}changeSceneByName(t){const e=this.getScene(t);e?this.changeScene(e):console.warn(`Scene "${t}" not found in sceneMap.`)}getCurrentScene(){return this.currentScene}getCurrentSceneByName(){for(const[t,e]of this.sceneMap.entries())if(e===this.currentScene)return t;return""}}class a extends n{constructor(t,e,i=-500){super({x:t,y:e},{width:90,height:15}),this.isActive=!0,this.jumpForce=i,this.initializePlatform()}initializePlatform(){const t=this.getTextureName();this.AddImage(e.getInstance().getTexture(t))}Update(t){this.isActive&&(this.updatePlatformSpecific(t),super.Update(t))}updatePlatformSpecific(t){}onPlayerLand(t){return this.handlePlayerLanding(),this.jumpForce}handlePlayerLanding(){}resetPosition(t,e){this.position.x=t,this.position.y=e,this.isActive=!0,this.hitbox.setPosition(this.position),this.onReset()}onReset(){}setRandomPosition(t,e){const i=Math.random()*(400-this.size.width),s=t+Math.random()*(e-t);this.resetPosition(i,s)}get isActivePlatform(){return this.isActive}Render(t){this.isActive&&super.Render(t)}}class c extends a{constructor(t,e){super(t,e,-500)}getTextureName(){return"platform"}}class l extends a{constructor(t,e){super(t,e,-1e3)}getTextureName(){return"spring"}handlePlayerLanding(){console.log("Spring bounce!")}}class g extends a{constructor(t,i,s=2e3){super(t,i,-500),this.disappearDelay=200,this.disappearTimer=0,this.isTriggered=!1,this.respawnTime=s,this.respawnTimer=0,this.originalY=i,this.beforeTexture=e.getInstance().getTexture("before"),this.afterTexture=e.getInstance().getTexture("after")}getTextureName(){return"before"}handlePlayerLanding(){this.isTriggered||this.triggerDisappear()}triggerDisappear(){this.isTriggered=!0,this.disappearTimer=this.disappearDelay}Render(t){if(!this.isActive)return;const e=this.isTriggered?this.afterTexture:this.beforeTexture;t.render(e,this.position.x,this.position.y)}breakPlatform(){this.isActive=!1,this.respawnTimer=this.respawnTime,this.isTriggered=!1,this.disappearTimer=0}updatePlatformSpecific(t){this.isTriggered&&this.disappearTimer>0&&this.isActive&&(this.disappearTimer-=1e3*t,this.disappearTimer<=0&&this.breakPlatform()),!this.isActive&&this.respawnTimer>0&&(this.respawnTimer-=1e3*t,this.respawnTimer<=0&&this.respawn())}respawn(){this.isActive=!0,this.isTriggered=!1,this.disappearTimer=0,this.position.y=this.originalY,this.hitbox.setPosition(this.position)}resetPosition(t,e){super.resetPosition(t,e),this.originalY=e,this.isTriggered=!1,this.disappearTimer=0}onReset(){this.respawnTimer=0,this.isTriggered=!1,this.isActive=!0,this.disappearTimer=0,this.position.y=this.originalY,this.hitbox.setPosition(this.position)}}class d extends a{constructor(t,e,i=50,s=100){super(t,e,-500),this.originalX=t,this.moveDirection=1,this.moveSpeed=i,this.moveRange=s}getTextureName(){return"platform"}updatePlatformSpecific(t){this.updateMovement(t)}updateMovement(t){this.position.x+=this.moveSpeed*this.moveDirection*t,this.position.x<=this.originalX-this.moveRange?(this.moveDirection=1,this.position.x=this.originalX-this.moveRange):this.position.x>=this.originalX+this.moveRange&&(this.moveDirection=-1,this.position.x=this.originalX+this.moveRange),this.position.x<0?(this.position.x=0,this.moveDirection=1):this.position.x>400-this.size.width&&(this.position.x=400-this.size.width,this.moveDirection=-1),this.hitbox.setPosition(this.position)}onReset(){this.originalX=this.position.x,this.moveDirection=1}}class p extends a{constructor(t,i){super(t,i,-500),this.springOffset=10,this.springPos={x:0,y:0},this.springPos.x=t+(this.size.width-50)/2+40,this.springPos.y=i-40+this.springOffset,this.springHitBox=new s({x:this.springPos.x,y:this.springPos.y},50,40),this.springImage=e.getInstance().getTexture("duma")}getTextureName(){return"platform"}onReset(){this.springImage=e.getInstance().getTexture("duma")}Update(t){if(super.Update(t),this.isActive){const t=this.position.x+(this.size.width-this.springHitBox.getWidth())/2+40,e=this.position.y-this.springHitBox.getHeight()+this.springOffset;this.springHitBox.setPosition({x:t,y:e})}}getSpringHitBox(){return this.springHitBox}checkSpringCollision(t){t.hitbox;const e=t.position.y+t.size.height,i=t.position.x+t.size.width/2,s=this.springHitBox.getPosX(),n=this.springHitBox.getPosX()+this.springHitBox.getWidth(),o=this.springHitBox.getPosY(),r=this.springHitBox.getPosY()+this.springHitBox.getHeight();return e>=o&&e<=r&&i>=s&&i<=n}onPlayerLand(t){return t&&this.checkSpringCollision(t)?(this.springImage=e.getInstance().getTexture("stretch"),console.log("Spring bounce activated!"),-1e3):this.jumpForce}Render(t){this.isActive&&(super.Render(t),this.springImage&&t.render(this.springImage,this.springHitBox.getPosX(),this.springHitBox.getPosY()))}}class u extends a{constructor(t,i){super(t,i,-500),this.springOffset=10,this.springPos={x:0,y:0},this.isRocketActive=!1,this.rocketDuration=2,this.rocketTimer=0,this.initialForce=-350,this.targetPlayer=null,this.targetPhysics=null,this.springPos.x=t+(this.size.width-80)/2+40,this.springPos.y=i-40+this.springOffset,this.springHitBox=new s({x:this.springPos.x,y:this.springPos.y},80,40),this.springImage=e.getInstance().getTexture("concu")}getTextureName(){return"platform"}onReset(){this.isRocketActive=!1,this.rocketTimer=0,this.targetPlayer=null,this.targetPhysics=null}Update(t){if(super.Update(t),this.isActive){const t=this.position.x+(this.size.width-this.springHitBox.getWidth())/2+40,e=this.position.y-this.springHitBox.getHeight()+this.springOffset;this.springHitBox.setPosition({x:t,y:e})}this.isRocketActive&&this.targetPlayer&&this.targetPhysics&&(this.targetPlayer.SetCollision(),this.updateRocketEffect(t))}updateRocketEffect(t){if(this.rocketTimer+=t,this.rocketTimer>=this.rocketDuration)return this.isRocketActive=!1,this.targetPlayer=null,void(this.targetPhysics=null);const e=1-this.rocketTimer/this.rocketDuration;let i=this.initialForce;if(e<.9&&(i=this.initialForce*(e*e*1.5)),this.targetPlayer&&this.targetPlayer.SetCollision(),this.targetPhysics){const t=this.targetPhysics.getVelocity();this.targetPhysics.setVelocity({x:t.x,y:i})}}getSpringHitBox(){return this.springHitBox}checkSpringCollision(t){t.hitbox;const e=t.position.y+t.size.height,i=t.position.x+t.size.width/2,s=this.springHitBox.getPosX(),n=this.springHitBox.getPosX()+this.springHitBox.getWidth(),o=this.springHitBox.getPosY(),r=this.springHitBox.getPosY()+this.springHitBox.getHeight();return e>=o&&e<=r&&i>=s&&i<=n}onPlayerLand(t){return t&&this.checkSpringCollision(t)?(console.log("Nobita rocket activated!"),this.isRocketActive=!0,this.rocketTimer=0,this.targetPlayer=t,this.targetPhysics=t.getComponent("Physic2D"),-2500):this.jumpForce}Render(t){this.isActive&&(super.Render(t),this.springImage&&t.render(this.springImage,this.springHitBox.getPosX(),this.springHitBox.getPosY()))}}class m{static createPlatform(t,e,i){switch(t){case"normal":return new c(e,i);case"spring":return new l(e,i);case"moving":return new d(e,i);case"invi":return new g(e,i);case"springy":return new p(e,i);default:return new u(e,i)}}static createRandomPlatform(t,e,i=!0){if(!i)return new c(t,e);const s=Math.random();return s<.5?new c(t,e):s<.65?new l(t,e):s<.8?new d(t,e):s<.9?new p(t,e):new g(t,e)}}class y{constructor(t,e){this.platformList=[],this.PLATFORM_COUNT=10,this.PLATFORM_VERTICAL_SPACING=100,this.PLATFORM_MIN_SPAWN_DISTANCE=90,this.PLATFORM_MAX_SPAWN_DISTANCE=150,this.SCREEN_WIDTH=400,this.player=t,this.collision=e,this.createInitialPlatforms()}createInitialPlatforms(){this.platformList=[];for(let t=0;t<this.PLATFORM_COUNT;t++){const e=this.createPlatformAtIndex(t);this.addPlatformToGame(e)}}createPlatformAtIndex(t){const e=this.generateRandomX(),i=900+t*-this.PLATFORM_VERTICAL_SPACING;return m.createRandomPlatform(e,i,t>2)}generateRandomX(){return Math.random()*this.SCREEN_WIDTH}addPlatformToGame(t){t instanceof p&&this.collision.addHitBox(t.getSpringHitBox()),this.collision.addHitBox(t.hitbox),this.platformList.push(t)}update(t){for(const e of this.platformList)e.Update(t)}movePlatformsDown(t){for(const e of this.platformList)e.position.y+=t,e.hitbox.setPosition(e.position)}handlePlatformRecycling(){const t=this.getHighestPlatformY();for(const e of this.platformList)this.isPlatformBelowScreen(e)&&this.recyclePlatform(e,t)}getHighestPlatformY(){return Math.min(...this.platformList.map((t=>t.position.y)))}isPlatformBelowScreen(t){return t.position.y>900}recyclePlatform(t,e){const i=this.generateRandomX(),s=e-this.getRandomSpawnDistance();t.resetPosition(i,s),t.onReset()}getRandomSpawnDistance(){return this.PLATFORM_MIN_SPAWN_DISTANCE+Math.random()*(this.PLATFORM_MAX_SPAWN_DISTANCE-this.PLATFORM_MIN_SPAWN_DISTANCE)-20}checkPlayerCollision(t){const e=this.player.hitbox;for(const i of this.platformList)if(i.isActivePlatform){if(i instanceof u&&i.checkSpringCollision(this.player))return this.handlePlayerLandingOnPlatform(i,t),!0;if(i instanceof p&&this.checkSpringyPlatformCollision(i,t))return!0;if(this.isPlayerLandingOnPlatform(e,i,10))return this.handlePlayerLandingOnPlatform(i,t),!0}return!1}checkSpringyPlatformCollision(t,e){const i=this.player.hitbox;return(t.checkSpringCollision(this.player)||!!this.isPlayerLandingOnPlatform(i,t,10))&&(this.handlePlayerLandingOnPlatform(t,e),!0)}isPlayerLandingOnPlatform(t,e,i){if(!t.intersects(e.hitbox))return!1;const s=this.player.position.y+this.player.size.height,n=e.position.y;return Math.abs(s-n)<i}handlePlayerLandingOnPlatform(t,e){const i=t.onPlayerLand(this.player);e.setVelocity({x:e.getVelocity().x,y:i})}render(t){for(const e of this.platformList)e.Render(t)}reset(){for(let t=0;t<this.platformList.length;t++){const e=this.generateRandomX(),i=600+t*-this.PLATFORM_VERTICAL_SPACING;this.platformList[t].resetPosition(e,i),this.platformList[t].onReset()}}getPlatformCount(){return this.platformList.length}getActivePlatformCount(){return this.platformList.filter((t=>t.isActivePlatform)).length}}class x extends i{Init(){}constructor(t,e,i){super(),this.currentFrame=0,this.clock=0,this.texture=t,this.numFrame=e,this.frameTime=i,this.frameParam={x:Math.floor(t.width/e.x),y:Math.floor(t.height/e.y)},this.totalFrames=e.x*e.y}update(t){this.clock+=t,this.clock>=this.frameTime&&(this.currentFrame=(this.currentFrame+1)%this.totalFrames,this.clock-=this.frameTime)}render(t,e,i){const s=this.currentFrame%this.numFrame.x,n=Math.floor(this.currentFrame/this.numFrame.x);t.drawFrame(this.texture,s*this.frameParam.x,n*this.frameParam.y,this.frameParam.x,this.frameParam.y,e,i,this.frameParam.x,this.frameParam.y)}setTexture(t){this.texture=t}reset(){this.currentFrame=0,this.clock=0}}class P extends i{constructor(t,e,i={x:0,y:0},s={x:0,y:0},n=980,o=!0){super(),this.totalTime=0,this.hitbox=e,this.position=t,this.velocity=i,this.acceleration=s,this.gravity=n,this.useGravity=o,this.startY=t.y,this.startX=t.x}Init(){}update(t){this.velocity.y+=this.gravity*t,this.position.x+=this.velocity.x*t,this.position.y+=this.velocity.y*t,this.hitbox.setPosition(this.position)}render(){}getVelocity(){return this.velocity}getPosition(){return this.position}setPosition(t){this.position=t}setVelocity(t){this.velocity=t}setAcceleration(t){this.acceleration=t}setGravity(t){this.gravity=t}enableGravity(t){this.useGravity=t}addForce(t){this.velocity.x+=t.x,this.velocity.y+=t.y}}class f{static initialize(t){f.canvas=t,t.addEventListener("mousemove",(e=>{const i=t.getBoundingClientRect();f.mouse={x:e.clientX-i.left,y:e.clientY-i.top}})),t.addEventListener("mousedown",(()=>{f.mouseDown=!0})),t.addEventListener("mouseup",(()=>{f.mouseDown=!1})),window.addEventListener("keydown",(t=>{f.keys.add(t.key.toLowerCase())})),window.addEventListener("keyup",(t=>{f.keys.delete(t.key.toLowerCase())}))}static isKeyDown(t){return f.keys.has(t.toLowerCase())}static getMouse(){return f.mouse}static isMouseDown(){return f.mouseDown}}f.keys=new Set,f.mouse={x:0,y:0},f.mouseDown=!1,f.canvas=null;class S{constructor(){this.isRocketActive=!1,this.FIXED_Y=300,this.MOVE_SPEED=300,this.SIZE={width:40,height:40},this.SCREEN_WIDTH=400,this.isJumping=!1,this.initializePlayer()}activateRocketMode(){this.isRocketActive=!0,console.log("cc")}deactivateRocketMode(){this.isRocketActive=!1}isInRocketMode(){return this.isRocketActive}update(t){this.handleInput(),this.updateBoundaries(),-1500==this.physics.getVelocity().y?this.isRocketActive||this.activateRocketMode():this.isRocketActive&&this.deactivateRocketMode(),this.gameObject.Update(t)}initializePlayer(){this.gameObject=new n({x:200,y:this.FIXED_Y},this.SIZE),this.physics=new P({x:200,y:this.FIXED_Y},this.gameObject.hitbox),this.gameObject.AddComponent(this.physics)}InitAnimation(){this.animation=new x(e.getInstance().getTexture("blue-lik-left"),{x:1,y:1},0),this.gameObject.AddComponent(this.animation)}handleInput(){const t=this.physics.getVelocity();this.getPhysics,f.isKeyDown("ArrowRight")?(this.physics.setVelocity({x:this.MOVE_SPEED,y:t.y}),this.animation.setTexture(e.getInstance().getTexture("blue-lik-right"))):f.isKeyDown("ArrowLeft")?(this.physics.setVelocity({x:-this.MOVE_SPEED,y:t.y}),this.animation.setTexture(e.getInstance().getTexture("blue-lik-left"))):this.physics.setVelocity({x:0,y:t.y})}updateBoundaries(){const t=this.gameObject.size.width;this.gameObject.position.x>this.SCREEN_WIDTH+t?this.setPosition(0,this.gameObject.position.y):this.gameObject.position.x<-t&&this.setPosition(this.SCREEN_WIDTH,this.gameObject.position.y)}setPosition(t,e){this.gameObject.position.x=t,this.gameObject.position.y=e,this.physics.setPosition({x:t,y:e})}resetPosition(){this.setPosition(200,this.FIXED_Y),this.physics.setVelocity({x:0,y:0})}render(t){this.gameObject.Render(t)}getGameObject(){return this.gameObject}getPhysics(){return this.physics}getPosition(){return this.gameObject.position}getSize(){return this.gameObject.size}getFixedY(){return this.FIXED_Y}getIsJumping(){return this.isJumping}setIsJumping(t){this.isJumping=t}getVelocity(){return this.physics.getVelocity()}}class w extends r{constructor(){super(),this.currentScore=0,this.highScore=0,this.initializeComponents(),this.platformManager=new y(this.player.getGameObject(),this.collision),this.loadHighScore()}loadHighScore(){const t=localStorage.getItem("doodleJumpHighScore");t&&(this.highScore=parseInt(t))}saveHighScore(){localStorage.setItem("doodleJumpHighScore",this.highScore.toString())}saveCurrentScore(){localStorage.setItem("doodleJumpCurrentScore",this.currentScore.toString())}initializeComponents(){this.collision=new t,this.player=new S,this.background=new n({x:0,y:0},{width:900,height:900})}Init(){this.player.InitAnimation(),this.collision.addHitBox(this.player.getGameObject().hitbox),this.background.AddImage(e.getInstance().getTexture("background")),this.loadHighScore()}update(t){this.updateGameObjects(t),this.handleCameraFollow(),this.platformManager.handlePlatformRecycling(),this.handleCollisions(),this.checkGameOver()}updateGameObjects(t){this.player.update(t),this.platformManager.update(t)}handleCameraFollow(){const t=this.player.getPosition(),e=this.player.getVelocity(),i=this.player.getFixedY();if(t.y<i&&e.y<0){const e=i-t.y;this.platformManager.movePlatformsDown(e),this.player.setPosition(t.x,i),this.updateScore(e)}}updateScore(t){this.currentScore+=t,Math.floor(this.currentScore)>this.highScore&&(this.highScore=Math.floor(this.currentScore))}handleCollisions(){const t=this.player.getVelocity();this.platformManager.checkPlayerCollision(this.player.getPhysics())?!this.player.getIsJumping()&&t.y>0&&this.player.setIsJumping(!0):this.player.setIsJumping(!1)}checkGameOver(){this.player.getPosition().y>700&&this.handleGameOver()}handleGameOver(){this.saveHighScore(),this.saveCurrentScore(),h.getInstance().changeSceneByName("DashboardScene")}exit(){this.resetPlayerState(),this.platformManager.reset(),this.resetGameState()}resetPlayerState(){this.player.resetPosition()}resetGameState(){this.currentScore=0}render(t){this.background.Render(t),this.platformManager.render(t),this.player.render(t);const e=`Score: ${Math.floor(this.currentScore)}`;t.drawText(e,250,50,"40px Arial","center","Black")}getCurrentScore(){return Math.floor(this.currentScore)}getHighScore(){return this.highScore}getPlatformCount(){return this.platformManager.getPlatformCount()}getActivePlatformCount(){return this.platformManager.getActivePlatformCount()}}class v extends n{constructor(t,e){super(e,{width:t.x,height:t.y}),this.wasMouseDownLastFrame=!1,this.cooldownTimer=0,this.isPressed=!1}Init(){}setOnClick(t){this.onClickCallback=t}resetState(){this.wasMouseDownLastFrame=!1,this.isPressed=!1}isMouseInside(t){return t.x>=this.position.x&&t.x<=this.position.x+this.size.width&&t.y>=this.position.y&&t.y<=this.position.y+this.size.height}Update(t){this.cooldownTimer>0&&(this.cooldownTimer-=t);const e=f.getMouse(),i=f.isMouseDown(),s=this.isMouseInside(e);!this.wasMouseDownLastFrame&&i&&s&&this.cooldownTimer<=0&&this.onClickCallback&&(this.onClickCallback(),this.cooldownTimer=.2),this.wasMouseDownLastFrame=i,this.isPressed=i&&s}isButtonPressed(){return this.isPressed}}class T{constructor(){this.listGame=[],this.isJump=!1,this.Background=new n({x:0,y:0},{width:900,height:900}),this.Player=new n({x:80,y:480},{width:60,height:60}),this.base=new n({x:80,y:540},{width:60,height:20}),this.Collision=new t,this.Physic2D=new P({x:80,y:480},this.Player.hitbox),this.Player.AddComponent(this.Physic2D),this.listGame.push(this.Player),this.listGame.push(this.base)}Init(){this.anim1=new x(e.getInstance().getTexture("blue-lik-left"),{x:1,y:1},.1),this.listGame.push(this.Background),this.Player.AddComponent(this.anim1),this.Background.AddImage(e.getInstance().getTexture("loading")),this.Collision.addHitBox(this.Player.hitbox),this.Collision.addHitBox(this.base.hitbox)}update(t){for(const e of this.listGame)e.Update(t);this.Collision.check()?this.isJump||(this.Physic2D.setVelocity({x:0,y:-500}),this.isJump=!0):this.isJump=!1}render(t){var e;const i=this.Background.image;if(i){const s=t.getCanvas(),n=i.width,o=i.height,r=Math.min(s.width/n,s.height/o),h=n*r,a=o*r,c=(s.width-h)/2,l=(s.height-a)/2;null===(e=s.getContext("2d"))||void 0===e||e.drawImage(i,c,l,h,a)}for(const e of this.listGame)e!==this.Background&&e.Render(t)}}class I extends r{constructor(){super(),this.lastScore=0,this.highScore=0,this.isFirstLoad=!0,this.ListObject=new T,this.Butt=new v({x:100,y:50},{x:200,y:300}),this.Butt.setOnClick((()=>{console.log("Button clicked!"),setTimeout((()=>{h.getInstance().changeSceneByName("PlayScene")}),100)}))}exit(){console.log("Exiting Dashboard Scene")}Init(){this.ListObject.Init(),this.Butt.AddImage(e.getInstance().getTexture("play")),this.loadScores(),this.isFirstLoad=!1}loadScores(){const t=localStorage.getItem("doodleJumpHighScore");t&&(this.highScore=parseInt(t));const e=localStorage.getItem("doodleJumpCurrentScore");e&&(this.lastScore=parseInt(e))}update(t){this.ListObject.update(t),this.Butt.Update(t)}render(t){this.ListObject.render(t),this.Butt.Render(t)}}class b extends r{constructor(){super(),this.loadingComplete=!1,this.assetsToLoad=[],this.assetsToLoad=["background","play","loading","blue-lik-left","platform"]}Init(){this.startLoading()}startLoading(){return t=this,i=void 0,n=function*(){const t=e.getInstance(),i=this.assetsToLoad.map((e=>this.loadAsset(t,e)));yield Promise.all(i),yield this.delay(500),this.loadingComplete=!0,this.initializeGameScenes(),h.getInstance().changeSceneByName("DashboardScene")},new((s=void 0)||(s=Promise))((function(e,o){function r(t){try{a(n.next(t))}catch(t){o(t)}}function h(t){try{a(n.throw(t))}catch(t){o(t)}}function a(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s((function(t){t(i)}))).then(r,h)}a((n=n.apply(t,i||[])).next())}));var t,i,s,n}initializeGameScenes(){const t=h.getInstance(),e=t.getScene("DashboardScene"),i=t.getScene("PlayScene");e&&e.Init(),i&&i.Init()}loadAsset(t,e){return new Promise((i=>{const s=t.getTexture(e);s.complete?i():(s.onload=()=>i(),s.onerror=()=>i())}))}delay(t){return new Promise((e=>setTimeout(e,t)))}render(t){const e=t.getCanvas();t.fillRect(0,0,e.width,e.height,"#FFFFFF"),t.drawText("Loading...",e.width/2,e.height/2,"24px Arial","center","#000000")}exit(){this.loadingComplete=!1}}class C{static bootstrapScenes(){const t=new b,e=new I,i=new w;h.getInstance().AddScene("LoadingScene",t),h.getInstance().AddScene("DashboardScene",e),h.getInstance().AddScene("PlayScene",i),h.getInstance().changeSceneByName("LoadingScene"),t.Init()}}class A{constructor(){this.initialized=!1,this.canvas=document.createElement("canvas"),this.canvas.width=500,this.canvas.height=750,this.canvas.style.display="block",this.canvas.style.margin="0 auto",this.canvas.style.position="relative",this.canvas.style.background="#fff",document.body.style.display="flex",document.body.style.justifyContent="center",document.body.style.alignItems="center";const t=this.canvas.getContext("2d");if(!t)throw new Error("cudcnd");this.ctx=t,document.body.appendChild(this.canvas),this.initialized=!0}render(t,e=0,i=0){this.initialized||(this.canvas.width=Math.max(t.width,400),this.canvas.height=Math.max(t.height,400),document.body.appendChild(this.canvas),this.initialized=!0),this.ctx.drawImage(t,e,i)}fillRect(t,e,i,s,n){this.ctx.save(),this.ctx.fillStyle=n,this.ctx.fillRect(t,e,i,s),this.ctx.restore()}drawRect(t,e,i,s){this.ctx.save(),this.ctx.strokeStyle="red",this.ctx.lineWidth=2,this.ctx.strokeRect(t,e,i,s),this.ctx.restore()}drawFrame(t,e,i,s,n,o,r,h,a){this.ctx.drawImage(t,e,i,s,n,o,r,h,a)}drawText(t,e,i,s="20px Arial",n="center",o="black"){this.ctx&&(this.ctx.save(),this.ctx.font=s,this.ctx.textAlign=n,this.ctx.fillStyle=o,this.ctx.fillText(t,e,i),this.ctx.restore())}getCanvas(){return this.canvas}}new class{constructor(){}},(new class{constructor(){this.lastTime=0}Init(){C.bootstrapScenes(),this.Renderer=new A,f.initialize(this.Renderer.getCanvas())}Run(){this.Init(),this.lastTime=performance.now();const t=()=>{const e=performance.now(),i=(e-this.lastTime)/1e3;this.lastTime=e,this.Update(i),this.Render(),requestAnimationFrame(t)};requestAnimationFrame(t)}Update(t){var e;null===(e=h.getInstance().getCurrentScene())||void 0===e||e.update(t)}Render(){var t;null===(t=h.getInstance().getCurrentScene())||void 0===t||t.render(this.Renderer)}}).Run()})();